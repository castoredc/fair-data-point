# Record {{ record.record_id }} #

<{{ castor.uri }}/{{ record.record_id }}#person> a <http://purl.obolibrary.org/obo/NCBITaxon_9606> .
<{{ castor.uri }}/{{ record.record_id }}#patient> a <http://purl.obolibrary.org/obo/OBI_0000093> .
<{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/RO_0000087> <{{ castor.uri }}/{{ record.record_id }}#patient> .

{% if record.date_of_birth is defined and record.date_of_birth is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#birthdate> a <http://purl.obolibrary.org/obo/NCIT_C68615> ;
    <http://semanticscience.org/resource/SIO_000300> "{{ record.date_of_birth }}" .
<{{ castor.uri }}/{{ record.record_id }}#person> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#birthdate> .
{% endif %}

{% if record.status is defined and record.status is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#status> a <{{ record.status }}> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/RO_0000086> <{{ castor.uri }}/{{ record.record_id }}#status> .

    {% if record.status == "http://purl.obolibrary.org/obo/PATO_0001422" and record.date_of_death is defined and record.date_of_death is not null %}
        <{{ castor.uri }}/{{ record.record_id }}#deathdate> a <http://purl.obolibrary.org/obo/NCIT_C70810> .
        <{{ castor.uri }}/{{ record.record_id }}#deathdate> <http://semanticscience.org/resource/SIO_000300> "{{ record.date_of_death }}" .
        <{{ castor.uri }}/{{ record.record_id }}#status> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#deathdate> .
    {% endif %}
{% endif %}

{% if record.first_contact is defined and record.first_contact is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#visit> a <http://purl.obolibrary.org/obo/NCIT_C39564> .
    <{{ castor.uri }}/{{ record.record_id }}#visitdate> a <http://purl.bioontology.org/ontology/LNC/76423-3> ;
    <http://semanticscience.org/resource/SIO_000300> "{{ record.first_contact }}" .
    <{{ castor.uri }}/{{ record.record_id }}#visit> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#visitdate> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/RO_0000056> <{{ castor.uri }}/{{ record.record_id }}#visit> .
{% endif %}

{% if record.sex is defined and record.sex is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#gender> a <{{ record.sex }}> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/ERO_0001966> <{{ castor.uri }}/{{ record.record_id }}#gender> .
{% endif %}

{% if record.diagnosis_present is defined and record.diagnosis_present == "Yes" %}
    # TODO Update with Orpha / ICD check
    {% if record.rd_diagnosis_code is defined and record.rd_diagnosis_code == 'Orpha' %}
    <{{ castor.uri }}/{{ record.record_id }}#diagnosis> a <http://semanticscience.org/resource/SIO_001331> .
    <{{ castor.uri }}/{{ record.record_id }}#diagnosiscode> a <http://www.orpha.net/ORDO/Orphanet_{{ record.rd_diagnosis_orpha|replace({'-':''}) }}> .
        <{{ castor.uri }}/{{ record.record_id }}#diagnosis> <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> <{{ castor.uri }}/{{ record.record_id }}#diagnosiscode> .
    {% endif %}
    {% if record.age_at_diagnosis is defined and record.age_at_diagnosis is not null %}
        {% if record.age_at_diagnosis == 'Date' %}
            <{{ castor.uri }}/{{ record.record_id }}#diagnosisage> <http://semanticscience.org/resource/SIO_000300> "{{ record.date_of_diagnosis }}" .
        {% else %}
            <{{ castor.uri }}/{{ record.record_id }}#diagnosisagevalue> a <{{ record.age_at_diagnosis }}> .
            <{{ castor.uri }}/{{ record.record_id }}#diagnosisage> <http://semanticscience.org/resource/SIO_000300> <{{ castor.uri }}/{{ record.record_id }}#diagnosisagevalue> .
        {% endif %}
        <{{ castor.uri }}/{{ record.record_id }}#diagnosisage> a <http://www.ebi.ac.uk/efo/EFO_0004918> .
        <{{ castor.uri }}/{{ record.record_id }}#diagnosis> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#diagnosisage> .
    {% endif %}

    <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/ERO_0002100> <{{ castor.uri }}/{{ record.record_id }}#diagnosis> .
{% endif %}

{% if record.age_at_onset is defined and  record.age_at_onset is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#symptomage> a <http://purl.obolibrary.org/obo/NCIT_C124353> .
    {% if record.age_at_onset == 'Date' %}
        <{{ castor.uri }}/{{ record.record_id }}#symptomage> <http://semanticscience.org/resource/SIO_000300> "{{ record.date_of_onset }}" .
    {% else %}
        <{{ castor.uri }}/{{ record.record_id }}#symptomagevalue> a <{{ record.age_at_onset }}> .
        <{{ castor.uri }}/{{ record.record_id }}#symptomage> <http://semanticscience.org/resource/SIO_000300> <{{ castor.uri }}/{{ record.record_id }}#symptomagevalue> .
    {% endif %}
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#symptomage> .
{% endif %}

{% if record.genetic_diagnosis_codesystem is defined and  record.genetic_diagnosis_codesystem is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#geneticdiagnosis> a <http://purl.obolibrary.org/obo/NCIT_C20826> .
    {% if record.genetic_diagnosis_hgvs is defined and  record.genetic_diagnosis_hgvs is not null %}
        <{{ castor.uri }}/{{ record.record_id }}#variant> a <http://purl.obolibrary.org/obo/VariO_0001> ;
        <https://www.w3.org/2000/01/rdf-schema#label> "{{ record.genetic_diagnosis_hgvs }}" ;
        <https://www.wikidata.org/wiki/Property:P3331> "{{ record.genetic_diagnosis_hgvs }}" .
    {% elseif record.genetic_diagnosis_hgnc is defined and record.genetic_diagnosis_hgnc is not null %}
        <{{ castor.uri }}/{{ record.record_id }}#variant> a <http://purl.obolibrary.org/obo/VariO_0001> ;
        <https://www.w3.org/2000/01/rdf-schema#label> "{{ record.genetic_diagnosis_hgnc }}" ;
        <https://www.wikidata.org/wiki/Property:P354> "{{ record.genetic_diagnosis_hgnc }}" .
    {% elseif record.genetic_diagnosis_omim is defined and record.genetic_diagnosis_omim is not null %}
        <{{ castor.uri }}/{{ record.record_id }}#variant> a <http://purl.obolibrary.org/obo/VariO_0001> ;
        <https://www.w3.org/2000/01/rdf-schema#label> "{{ record.genetic_diagnosis_omim }}" ;
        <https://www.wikidata.org/wiki/Property:P492> "{{ record.genetic_diagnosis_omim }}" .
    {% endif %}
    {% if record.diagnosis_present == 'Yes' %}
        <{{ castor.uri }}/{{ record.record_id }}#genetictest> a <http://purl.obolibrary.org/obo/NCIT_C15709> .
        <{{ castor.uri }}/{{ record.record_id }}#genetictest> <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> <{{ castor.uri }}/{{ record.record_id }}#variant> .
        <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/PATO_0001668> <{{ castor.uri }}/{{ record.record_id }}#genetictest> .
    {% else %}
        <{{ castor.uri }}/{{ record.record_id }}#geneticdiagnosis> a <http://purl.obolibrary.org/obo/NCIT_C20826> .
        <{{ castor.uri }}/{{ record.record_id }}#geneticdiagnosis> <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> <{{ castor.uri }}/{{ record.record_id }}#variant> .
        <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/ERO_0002100> <{{ castor.uri }}/{{ record.record_id }}#geneticdiagnosis> .
    {% endif %}
{% endif %}

{% if record.undiagnosed_hpo is defined and record.undiagnosed_hpo is not empty %}
<{{ castor.uri }}/{{ record.record_id }}#phenotype> a <http://purl.obolibrary.org/obo/HP_{{ record.undiagnosed_hpo }}> .
<{{ castor.uri }}/{{ record.record_id }}#person> <http://rdf.biosemantics.org/ontologies/rd-connect/59e1324d_567b_42e1_bc88_203004e660da> <{{ castor.uri }}/{{ record.record_id }}#phenotype> .
{% endif %}

{% if record.biological_sample is defined and record.biological_sample == 'Yes' %}
    <{{ castor.uri }}/{{ record.record_id }}#specimen> a <http://purl.obolibrary.org/obo/OBI_0000112> .
    {% if record.link_biobank is defined and record.link_biobank == 'Yes' and  record.link_biobank_url is defined and record.link_biobank_url is not null %}
        <{{ castor.uri }}/{{ record.record_id }}#specimen> <http://semanticscience.org/resource/SIO_000300> <{{ record.link_biobank_url }}> .
    {% endif %}
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://rdf.biosemantics.org/ontologies/rd-connect/6c9783cd_d632_4e8b_bc0c_a83ea200f1b1> <{{ castor.uri }}/{{ record.record_id }}#specimen> .
{% endif %}

{% if record.agreement_contact is defined and record.agreement_contact is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#consentcontact> a <http://purl.obolibrary.org/obo/ICO_0000149> ;
    <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> <{{ record.agreement_contact }}> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#consentcontact> .
{% endif %}

{% if record.consent_reuse is defined and record.consent_reuse is not null %}
    <{{ castor.uri }}/{{ record.record_id }}#consentreuse> a <http://purl.obolibrary.org/obo/ICO_0000181> ;
    <http://www.w3.org/1999/02/22-rdf-syntax-ns#value> <{{ record.consent_reuse }}> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://semanticscience.org/resource/SIO_000008> <{{ castor.uri }}/{{ record.record_id }}#consentreuse> .
{% endif %}

{% if record.eupid_pseudonym is defined and record.eupid_pseudonym is not null %}
<{{ castor.uri }}/{{ record.record_id }}#identifier> a <http://rdf.biosemantics.org/ontologies/rd-connect/23d2f73b_6bb4_4c8f_af98_a3bb4a1f8e30> ;
<http://dublincore.org/2012/06/14/dcterms#identifier> "{{ record.eupid_pseudonym }}" ;
<http://purl.obolibrary.org/obo/IAO_0000219> <{{ castor.uri }}/{{ record.record_id }}#person> .
{% endif %}

{% if record.whodas_score is defined and record.whodas_score is not empty %}
    <{{ castor.uri }}/{{ record.record_id }}#questionnaire> a <http://purl.obolibrary.org/obo/NCIT_C130322> .
    <{{ castor.uri }}/{{ record.record_id }}#person> <http://purl.obolibrary.org/obo/RO_0000056> <{{ castor.uri }}/{{ record.record_id }}#questionnaire> .

    <{{ castor.uri }}/{{ record.record_id }}#scoretype> a <http://purl.bioontology.org/ontology/SNOMEDCT/715823002> .

    <{{ castor.uri }}/{{ record.record_id }}#score> a <http://purl.obolibrary.org/obo/NCIT_C25613> ;
    <http://semanticscience.org/resource/SIO_000300> "{{ record.whodas_score }}" ;
    <http://semanticscience.org/resource/SIO_000332> <{{ castor.uri }}/{{ record.record_id }}#scoretype> ;
    <http://www.w3.org/ns/prov#wasGeneratedBy> <{{ castor.uri }}/{{ record.record_id }}#questionnaire> .

    {% if record.whodas_h1 is defined and record.whodas_h1 is not empty %}
        <{{ castor.uri }}/{{ record.record_id }}#scoredifficultiestype> a <http://purl.obolibrary.org/obo/NCIT_C130916> .

        <{{ castor.uri }}/{{ record.record_id }}#scoredifficulties> a <http://purl.obolibrary.org/obo/NCIT_C25301> ;
        <http://semanticscience.org/resource/SIO_000300> "{{ record.whodas_h1 }}" ;
        <http://semanticscience.org/resource/SIO_000332> <{{ castor.uri }}/{{ record.record_id }}#scoredifficultiestype> ;
        <http://www.w3.org/ns/prov#wasGeneratedBy> <{{ castor.uri }}/{{ record.record_id }}#questionnaire> .
    {% endif %}

    {% if record.whodas_h2 is defined and record.whodas_h2 is not empty %}
        <{{ castor.uri }}/{{ record.record_id }}#scoreunabletype> a <http://purl.obolibrary.org/obo/NCIT_C130917> .

        <{{ castor.uri }}/{{ record.record_id }}#scoreunable> a <http://purl.obolibrary.org/obo/NCIT_C25301> ;
        <http://semanticscience.org/resource/SIO_000300> "{{ record.whodas_h1 }}" ;
        <http://semanticscience.org/resource/SIO_000332> <{{ castor.uri }}/{{ record.record_id }}#scoreunabletype> ;
        <http://www.w3.org/ns/prov#wasGeneratedBy> <{{ castor.uri }}/{{ record.record_id }}#questionnaire> .
    {% endif %}

    {% if record.whodas_h3 is defined and record.whodas_h3 is not empty %}
        <{{ castor.uri }}/{{ record.record_id }}#scorereducedtype> a <http://purl.obolibrary.org/obo/NCIT_C130918> .

        <{{ castor.uri }}/{{ record.record_id }}#scorereduced> a <http://purl.obolibrary.org/obo/NCIT_C25301> ;
        <http://semanticscience.org/resource/SIO_000300> "{{ record.whodas_h3 }}" ;
        <http://semanticscience.org/resource/SIO_000332> <{{ castor.uri }}/{{ record.record_id }}#scorereducedtype> ;
        <http://www.w3.org/ns/prov#wasGeneratedBy> <{{ castor.uri }}/{{ record.record_id }}#questionnaire> .
    {% endif %}
{% endif %}